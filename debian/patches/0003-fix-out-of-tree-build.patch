From 913579b460b6e081e119e0ebdb662115857e0b43 Mon Sep 17 00:00:00 2001
From: Thierry Reding <thierry.reding@avionic-design.de>
Date: Fri, 14 Jan 2011 11:38:05 +0100
Subject: [PATCH] Fix out-of-tree build.

This patch fixes out-of-tree build, that is, when building with
$builddir != $srcdir. In such a case, some generated header files are
not found because they live in a different tree and can be fixed by
adding the directories to the compiler's include search path.
---
 lib/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/Makefile.am b/lib/Makefile.am
index ccedf43..5999113 100644
--- a/lib/Makefile.am
+++ b/lib/Makefile.am
@@ -1,6 +1,6 @@
 # -*- Makefile -*-
 
-AM_CPPFLAGS  = -Wall -I${top_srcdir}/include -I${top_builddir}/include -D_GNU_SOURCE -DSYSCONFDIR=\"$(sysconfdir)/libnl\"
+AM_CPPFLAGS  = -Wall -I${top_srcdir}/include -I${top_builddir}/include -I${builddir}/route -I${builddir}/route/cls -D_GNU_SOURCE -DSYSCONFDIR=\"$(sysconfdir)/libnl3\"
 AM_LDFLAGS = -version-info 3:0:0
 
 lib_LTLIBRARIES = \
--- libnl3-3.0.orig/lib/Makefile.in	2011-03-21 17:07:26.000000000 +0100
+++ libnl3-3.0/lib/Makefile.in	2011-07-29 23:22:02.162604056 +0200
@@ -324,7 +324,7 @@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-AM_CPPFLAGS = -Wall -I${top_srcdir}/include -I${top_builddir}/include -D_GNU_SOURCE -DSYSCONFDIR=\"$(sysconfdir)/libnl\"
+AM_CPPFLAGS = -Wall -I${top_srcdir}/include -I${top_builddir}/include -I${builddir}/route -I${builddir}/route/cls -D_GNU_SOURCE -DSYSCONFDIR=\"$(sysconfdir)/libnl3\"
 AM_LDFLAGS = -version-info 3:0:0
 lib_LTLIBRARIES = \
 	libnl.la libnl-genl.la libnl-route.la libnl-nf.la
--- libnl3-3.0.orig/doc/Doxyfile.in	2011-03-21 17:07:20.000000000 +0100
+++ libnl3-3.0/doc/Doxyfile.in	2011-07-30 00:36:26.348783732 +0200
@@ -581,10 +581,14 @@
 # directories like "/usr/src/myproject". Separate the files or directories
 # with spaces.
 
-INPUT                  = ../lib \
-                         ../src/lib \
-                         ../include/netlink \
-			 src
+INPUT                  = @top_srcdir@/lib \
+                         @top_srcdir@/src/lib \
+                         @top_srcdir@/include/netlink \
+                         @top_srcdir@/doc/src \
+                         @top_builddir@/lib \
+                         @top_builddir@/lib/route \
+                         @top_builddir@/lib/route/cls \
+                         @top_builddir@/include/netlink
 
 # This tag can be used to specify the character encoding of the source files
 # that doxygen parses. Internally doxygen uses the UTF-8 encoding, which is
@@ -642,7 +644,7 @@
 # directories that contain example code fragments that are included (see
 # the \include command).
 
-EXAMPLE_PATH           = src/examples
+EXAMPLE_PATH           = @top_srcdir@/src/examples
 
 # If the value of the EXAMPLE_PATH tag contains directories, you can use the
 # EXAMPLE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp
@@ -662,7 +664,7 @@
 # directories that contain image that are included in the documentation (see
 # the \image command).
 
-IMAGE_PATH             = src/img
+IMAGE_PATH             = @top_srcdir@/src/img
 
 # The INPUT_FILTER tag can be used to specify a program that doxygen should
 # invoke to filter for each input file. Doxygen will invoke the filter program
@@ -816,7 +818,7 @@
 # the style sheet file to the HTML output directory, so don't put your own
 # stylesheet in the HTML output directory as well, or it will be erased!
 
-HTML_STYLESHEET        = libnl.css
+HTML_STYLESHEET        = @srcdir@/libnl.css
 
 # The HTML_COLORSTYLE_HUE tag controls the color of the HTML output.
 # Doxygen will adjust the colors in the stylesheet and background images
